<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <title>{{ SITE_NAME }}{% block title %}{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="color-scheme" content="light dark">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <a href="#conteudo" class="skip-link">Pular para o conteÃºdo</a>

  <header class="navbar">
    <div class="container row">
      <a class="brand" href="{{ url_for('index') }}">ðŸŒ³ {{ SITE_NAME }}</a>
      <nav class="nav-links">
        <a href="{{ url_for('courses.list_courses') }}"
           class="{{ 'active' if request.path.startswith('/courses') else '' }}">Cursos</a>
        {% if current_user %}
          <a href="{{ url_for('dashboard') }}"
             class="{{ 'active' if request.path.startswith('/dashboard') else '' }}">Dashboard</a>
          <a href="{{ url_for('courses.new_course') }}">Novo curso</a>
        {% endif %}
      </nav>
      <div class="nav-user">
        {% if current_user %}
          <span class="user-chip" title="{{ current_user['email'] }}">
            {{ current_user['name'] }}
            {% if current_user['role'] and current_user['role'] != 'student' %}
              <span class="badge">{{ current_user['role'] }}</span>
            {% endif %}
          </span>
          <a class="btn outline small" href="{{ url_for('auth.logout') }}">Sair</a>
        {% else %}
          <a class="btn small" href="{{ url_for('auth.login') }}">Entrar</a>
          <a class="btn outline small" href="{{ url_for('auth.register_form') }}">Criar conta</a>
        {% endif %}
      </div>
    </div>
  </header>

  <main id="conteudo" class="container">
    {% with messages = get_flashed_messages(with_categories=True) %}
      {% if messages %}
        <div class="flashes">
          {% for category, message in messages %}
            <div class="flash flash-{{ category }}">
              <strong>{{ category|capitalize }}</strong> â€” {{ message }}
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
  </main>

  <footer class="footer">
    <div class="container">
      <p class="muted">Â© {{ SITE_NAME }} â€” feito com Flask & Jinja.</p>
    </div>
  </footer>
</body>
</html>